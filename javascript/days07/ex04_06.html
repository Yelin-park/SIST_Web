<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="../images/SiSt.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<title>2022. 6. 9. - 오전 11:14:53</title>
<style>
  .myProgress{
    width:100%;
    background-color: #ddd;
    border:solid 1px gray;
  }
  .myBar{
    width:1%;
    height: 30px;
    background-color: #4CAF50;
    text-align: right;
    color:red;
  }
</style>
</head>
<body>
<!-- (#myProgress$.myProgress>#myBar$.myBar+button#btn$>{진행})*5 -->
<div id="myProgress1" class="myProgress">
	<div id="myBar1" class="myBar"></div>
	<button id="btn1">진행</button>
</div>
<div id="myProgress2" class="myProgress">
	<div id="myBar2" class="myBar"></div>
	<button id="btn2">진행</button>
</div>
<div id="myProgress3" class="myProgress">
	<div id="myBar3" class="myBar"></div>
	<button id="btn3">진행</button>
</div>
<div id="myProgress4" class="myProgress">
	<div id="myBar4" class="myBar"></div>
	<button id="btn4">진행</button>
</div>
<div id="myProgress5" class="myProgress">
	<div id="myBar5" class="myBar"></div>
	<button id="btn5">진행</button>
</div>

<!-- <script>
	var btns = document.getElementsByTagName("button");
	for (var i = 0; i < btns.length; i++) {
		btns[i].onclick = function () {
			// this도 가능
			var btn = event.srcElement; // 지역변수이면서 전역변수 => 클로저 기능
			var width = 1; // 지역변수이면서 전역변수 => 클로저 기능
			var timer = setInterval(function(){ // 중첩 함수 => 클로저 기능
				if(width < 100){
					width++;
					btn.previousElementSibling.style.width = width+"%"; // div 태그
					btn.previousElementSibling.innerHTML = width+"%";
				} else {
					clearInterval(timer);
				}
			}, 30);
		}
	} // for
</script> -->
<script>
	$(".myProgress button").click(function(event) {
		var btn = $(this);
		var width = 1;
		var timer = setInterval(function(){
			if(width < 100){
				width++;
				// 콜백 함수 안에서 사용하는 this == window 객체 (이벤트가 발생하는 요소가 아님)
				// $(this).prev().css("width", width + "%"); 
				btn.prev().css("width", width + "%"); // div 태그
				btn.prev().html(width+"%");
			} else {
				clearInterval(timer);
			}
		}, 30);
	});
</script>
</body>
</html>